§
YE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Controllers\LoggedInController.cs
	namespace 	
ExternalLogins
 
. 
Controllers $
{		 
public

 

class

 
LoggedInController

 #
:

$ %

Controller

& 0
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
IProfileRepository +
_profileRepository, >
;> ?
public 
LoggedInController !
(! "
UserManager" -
<- .
ApplicationUser. =
>= >
userManager? J
,J K
IProfileRepositoryL ^
profileRepository_ p
)p q
{ 	
_userManager 
= 
userManager &
;& '
_profileRepository 
=  
profileRepository! 2
;2 3
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
userId 
= 
await 
_userManager +
.+ ,
GetUserAsync, 8
(8 9
HttpContext9 D
.D E
UserE I
)I J
;J K
var 

individual 
= 
_profileRepository /
./ 0
GetIndividualList0 A
(A B
userIdB H
.H I
IdI K
)K L
;L M
var 
model 
= 
new 
DashboardViewModel .
{ 
Individuals 
= 

individual (
} 
; 
return 
View 
( 
model 
) 
; 
}   	
}"" 
}## ∫å
UE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Controllers\MainController.cs
	namespace		 	
ExternalLogins		
 
.		 
Controllers		 $
{

 
public 

class 
MainController 
:  !

Controller" ,
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public 
MainController 
( 
UserManager )
<) *
ApplicationUser* 9
>9 :
userManager; F
,F G
SignInManagerH U
<U V
ApplicationUserV e
>e f
signInManagerg t
)t u
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
[ 	$
ValidateAntiForgeryToken	 !
]! "
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
LoginViewModel/ =
model> C
)C D
{ 	
if   
(   

ModelState   
.   
IsValid   "
)  " #
{!! 
var"" 
loginResults""  
=""! "
await## 
_signInManager## (
.##( )
PasswordSignInAsync##) <
(##< =
model##= B
.##B C
Username##C K
,##K L
model##M R
.##R S
Password##S [
,##[ \
model##] b
.##b c

RememberMe##c m
,##m n
lockoutOnFailure$$ ,
:$$, -
false$$. 3
)$$3 4
;$$4 5
if%% 
(%% 
loginResults%%  
.%%  !
	Succeeded%%! *
)%%* +
{&& 
return'' 
RedirectToAction'' +
(''+ ,
$str'', 3
,''3 4
$str''5 ?
)''? @
;''@ A
})) 

ModelState** 
.** 
AddModelError** (
(**( )
string**) /
.**/ 0
Empty**0 5
,**5 6
$str**7 S
)**S T
;**T U
return++ 
View++ 
(++ 
model++ !
)++! "
;++" #
},, 
return-- 
View-- 
(-- 
model-- 
)-- 
;-- 
}.. 	
[00 	
HttpPost00	 
]00 
[11 	
Route11	 
(11 
$str11 
)11 
]11 
public22 
IActionResult22 
LoginApi22 %
(22% &
[22& '
FromBody22' /
]22/ 0
LoginViewModel220 >
model22? D
)22D E
{33 	
var44 
loginResults44 
=44 
_signInManager44 -
.44- .
PasswordSignInAsync44. A
(44A B
model44B G
.44G H
Username44H P
,44P Q
model44R W
.44W X
Password44X `
,44` a
model44b g
.44g h

RememberMe44h r
,44r s
lockoutOnFailure55 (
:55( )
false55* /
)55/ 0
.550 1
Result551 7
;557 8
if66 
(66 
loginResults66 
.66 
	Succeeded66 &
)66& '
{77 
return99 
Ok99 
(99 
$str99  
)99  !
;99! "
}:: 
return;; 

BadRequest;; 
(;; 
$str;; %
);;% &
;;;& '
}== 	
public>> 
IActionResult>> 
Register>> %
(>>% &
)>>& '
{?? 	
returnAA 
ViewAA 
(AA 
)AA 
;AA 
}BB 	
[DD 	
HttpPostDD	 
]DD 
[EE 	$
ValidateAntiForgeryTokenEE	 !
]EE! "
publicFF 
asyncFF 
TaskFF 
<FF 
IActionResultFF '
>FF' (
RegisterFF) 1
(FF1 2
RegisterViewModelFF2 C
modelFFD I
)FFI J
{GG 	
ifHH 
(HH 

ModelStateHH 
.HH 
IsValidHH "
)HH" #
{II 
varJJ 
identityUserJJ  
=JJ! "
newJJ# &
ApplicationUserJJ' 6
{KK 
UserNameLL 
=LL 
modelLL $
.LL$ %
UsernameLL% -
,LL- .
EmailMM 
=MM 
modelMM !
.MM! "
UsernameMM" *
}OO 
;OO 
varQQ 
identityResultsQQ #
=QQ$ %
awaitQQ& +
_userManagerQQ, 8
.QQ8 9
CreateAsyncQQ9 D
(QQD E
identityUserQQE Q
,QQQ R
modelQQS X
.QQX Y
PasswordQQY a
)QQa b
;QQb c
ifRR 
(RR 
identityResultsRR #
.RR# $
	SucceededRR$ -
)RR- .
{SS 
varUU 
codeUU 
=UU 
awaitUU $
_userManagerUU% 1
.UU1 2/
#GenerateEmailConfirmationTokenAsyncUU2 U
(UUU V
identityUserUUV b
)UUb c
;UUc d
varWW 
callbackUrlWW #
=WW$ %
UrlWW& )
.WW) *
ActionWW* 0
(WW0 1
$strWW1 ?
,WW? @
$strWWA G
,WWG H
newWWI L
{WWM N
userIdWWO U
=WWV W
identityUserWWX d
.WWd e
IdWWe g
,WWg h
codeWWi m
=WWn o
codeWWp t
}WWu v
,WWv w
protocolXX  
:XX  !
HttpContextXX" -
.XX- .
RequestXX. 5
.XX5 6
SchemeXX6 <
)XX< =
;XX= >
awaitZZ 
_signInManagerZZ (
.ZZ( )
SignInAsyncZZ) 4
(ZZ4 5
identityUserZZ5 A
,ZZA B
isPersistentZZC O
:ZZO P
falseZZQ V
)ZZV W
;ZZW X
return[[ 
View[[ 
([[  
model[[  %
)[[% &
;[[& '
;\\ 
}]] 
else^^ 
{__ 

ModelStateaa 
.aa 
AddModelErroraa ,
(aa, -
stringaa- 3
.aa3 4
Emptyaa4 9
,aa9 :
$straa; W
)aaW X
;aaX Y
returnbb 
Viewbb 
(bb  
modelbb  %
)bb% &
;bb& '
}cc 
}ee 
returnff 
Viewff 
(ff 
modelff 
)ff 
;ff 
}gg 	
[ii 	
HttpGetii	 
]ii 
publicjj 
asyncjj 
Taskjj 
<jj 
IActionResultjj '
>jj' (
ConfirmEmailjj) 5
(jj5 6
stringjj6 <
userIdjj= C
,jjC D
stringjjE K
codejjL P
)jjP Q
{kk 	
ifll 
(ll 
userIdll 
==ll 
nullll 
||ll !
codell" &
==ll' )
nullll* .
)ll. /
{mm 
returnnn 
Viewnn 
(nn 
$strnn #
)nn# $
;nn$ %
}oo 
varqq 
userqq 
=qq 
awaitqq 
_userManagerqq )
.qq) *
FindByIdAsyncqq* 7
(qq7 8
userIdqq8 >
)qq> ?
;qq? @
ifss 
(ss 
userss 
==ss 
nullss 
)ss 
{tt 
returnuu 
Viewuu 
(uu 
$struu #
)uu# $
;uu$ %
}ww 
varyy 
resultyy 
=yy 
awaityy 
_userManageryy +
.yy+ ,
ConfirmEmailAsyncyy, =
(yy= >
useryy> B
,yyB C
codeyyD H
)yyH I
;yyI J
returnzz 
Viewzz 
(zz 
$strzz &
)zz& '
;zz' (
}|| 	
public~~ 
IActionResult~~ 
ResetPassword~~ *
(~~* +
)~~+ ,
{ 	
return
ÅÅ 
View
ÅÅ 
(
ÅÅ 
)
ÅÅ 
;
ÅÅ 
}
ÇÇ 	
public
ùù 
IActionResult
ùù 
ForgotPassword
ùù +
(
ùù+ ,
)
ùù, -
{
ûû 	
return
†† 
View
†† 
(
†† 
)
†† 
;
†† 
}
°° 	
[
«« 	
HttpPost
««	 
]
«« 
[
»» 	&
ValidateAntiForgeryToken
»»	 !
]
»»! "
public
…… 
async
…… 
Task
…… 
<
…… 
IActionResult
…… '
>
……' (
LogOff
……) /
(
……/ 0
)
……0 1
{
   	
await
ÃÃ 
_signInManager
ÃÃ  
.
ÃÃ  !
SignOutAsync
ÃÃ! -
(
ÃÃ- .
)
ÃÃ. /
;
ÃÃ/ 0
return
ŒŒ 
RedirectToAction
ŒŒ #
(
ŒŒ# $
$str
ŒŒ$ +
,
ŒŒ+ ,
$str
ŒŒ- 3
)
ŒŒ3 4
;
ŒŒ4 5
}
œœ 	
[
—— 	
HttpPost
——	 
]
—— 
[
““ 	
AllowAnonymous
““	 
]
““ 
[
”” 	&
ValidateAntiForgeryToken
””	 !
]
””! "
public
‘‘ 
IActionResult
‘‘ 
ExternalLogin
‘‘ *
(
‘‘* +
string
‘‘+ 1
provider
‘‘2 :
,
‘‘: ;
string
‘‘< B
	returnUrl
‘‘C L
=
‘‘M N
null
‘‘O S
)
‘‘S T
{
’’ 	
var
÷÷ 
redirectUrl
÷÷ 
=
÷÷ 
Url
÷÷ !
.
÷÷! "
Action
÷÷" (
(
÷÷( )
$str
÷÷) @
,
÷÷@ A
$str
÷÷B H
,
÷÷H I
new
÷÷J M
{
÷÷N O
	returnUrl
÷÷P Y
=
÷÷Z [
$str
÷÷\ n
}
÷÷o p
)
÷÷p q
;
÷÷q r
var
ÿÿ 

properties
ÿÿ 
=
ÿÿ 
_signInManager
ÿÿ +
.
ÿÿ+ ,7
)ConfigureExternalAuthenticationProperties
ÿÿ, U
(
ÿÿU V
provider
ÿÿV ^
,
ÿÿ^ _
redirectUrl
ÿÿ` k
)
ÿÿk l
;
ÿÿl m
return
ŸŸ 
	Challenge
ŸŸ 
(
ŸŸ 

properties
ŸŸ '
,
ŸŸ' (
provider
ŸŸ) 1
)
ŸŸ1 2
;
ŸŸ2 3
}
⁄⁄ 	
public
›› 
async
›› 
Task
›› 
<
›› 
IActionResult
›› '
>
››' (#
ExternalLoginCallback
››) >
(
››> ?
string
››? E
	returnUrl
››F O
=
››P Q
null
››R V
,
››V W
string
››X ^
remoteError
››_ j
=
››k l
null
››m q
)
››q r
{
ﬁﬁ 	
if
ﬂﬂ 
(
ﬂﬂ 
remoteError
ﬂﬂ 
!=
ﬂﬂ 
null
ﬂﬂ #
)
ﬂﬂ# $
{
‡‡ 
return
·· 
View
·· 
(
·· 
nameof
·· "
(
··" #"
ExternalLoginFailure
··# 7
)
··7 8
)
··8 9
;
··9 :
}
‚‚ 
var
‰‰ 
info
‰‰ 
=
‰‰ 
await
‰‰ 
_signInManager
‰‰ +
.
‰‰+ ,'
GetExternalLoginInfoAsync
‰‰, E
(
‰‰E F
)
‰‰F G
;
‰‰G H
if
ÊÊ 
(
ÊÊ 
info
ÊÊ 
==
ÊÊ 
null
ÊÊ 
)
ÊÊ 
{
ÁÁ 
return
ËË 
RedirectToAction
ËË '
(
ËË' (
nameof
ËË( .
(
ËË. /"
ExternalLoginFailure
ËË/ C
)
ËËC D
)
ËËD E
;
ËËE F
}
ÈÈ 
var
ÎÎ 
result
ÎÎ 
=
ÎÎ 
await
ÏÏ 
_signInManager
ÏÏ $
.
ÏÏ$ %&
ExternalLoginSignInAsync
ÏÏ% =
(
ÏÏ= >
info
ÏÏ> B
.
ÏÏB C
LoginProvider
ÏÏC P
,
ÏÏP Q
info
ÏÏR V
.
ÏÏV W
ProviderKey
ÏÏW b
,
ÏÏb c
isPersistent
ÏÏd p
:
ÏÏp q
false
ÏÏr w
)
ÏÏw x
;
ÏÏx y
if
ÓÓ 
(
ÓÓ 
result
ÓÓ 
.
ÓÓ 
	Succeeded
ÓÓ  
)
ÓÓ  !
{
ÔÔ 
return
 
Redirect
 
(
  
	returnUrl
  )
)
) *
;
* +
}
ÒÒ 
else
ÚÚ 
{
ÛÛ 
ViewData
ÙÙ 
[
ÙÙ 
$str
ÙÙ $
]
ÙÙ$ %
=
ÙÙ& '
	returnUrl
ÙÙ( 1
;
ÙÙ1 2
ViewData
ıı 
[
ıı 
$str
ıı (
]
ıı( )
=
ıı* +
info
ıı, 0
.
ıı0 1
LoginProvider
ıı1 >
;
ıı> ?
var
ˆˆ 
email
ˆˆ 
=
ˆˆ 
info
ˆˆ  
.
ˆˆ  !
	Principal
ˆˆ! *
.
ˆˆ* +
FindFirstValue
ˆˆ+ 9
(
ˆˆ9 :

ClaimTypes
ˆˆ: D
.
ˆˆD E
Email
ˆˆE J
)
ˆˆJ K
;
ˆˆK L
return
˜˜ 
View
˜˜ 
(
˜˜ 
$str
˜˜ 7
,
˜˜7 8
new
¯¯ 0
"ExternalLoginConfirmationViewModel
¯¯ :
{
¯¯; <
Email
¯¯= B
=
¯¯C D
email
¯¯E J
}
¯¯K L
)
¯¯L M
;
¯¯M N
}
˘˘ 
}
˙˙ 	
[
¸¸ 	
HttpPost
¸¸	 
]
¸¸ 
[
˝˝ 	
AllowAnonymous
˝˝	 
]
˝˝ 
[
˛˛ 	&
ValidateAntiForgeryToken
˛˛	 !
]
˛˛! "
public
ˇˇ 
async
ˇˇ 
Task
ˇˇ 
<
ˇˇ 
IActionResult
ˇˇ '
>
ˇˇ' ('
ExternalLoginConfirmation
ˇˇ) B
(
ˇˇB C0
"ExternalLoginConfirmationViewModel
ˇˇC e
model
ˇˇf k
,
ˇˇk l
string
ÄÄ 
	returnUrl
ÄÄ 
=
ÄÄ 
null
ÄÄ #
)
ÄÄ# $
{
ÅÅ 	
if
ÇÇ 
(
ÇÇ 

ModelState
ÇÇ 
.
ÇÇ 
IsValid
ÇÇ "
)
ÇÇ" #
{
ÉÉ 
var
ÑÑ 
info
ÑÑ 
=
ÑÑ 
await
ÑÑ  
_signInManager
ÑÑ! /
.
ÑÑ/ 0'
GetExternalLoginInfoAsync
ÑÑ0 I
(
ÑÑI J
)
ÑÑJ K
;
ÑÑK L
if
ÖÖ 
(
ÖÖ 
info
ÖÖ 
==
ÖÖ 
null
ÖÖ  
)
ÖÖ  !
{
ÜÜ 
return
áá 
View
áá 
(
áá  
$str
áá  6
)
áá6 7
;
áá7 8
}
àà 
var
ää 
user
ää 
=
ää 
new
ää 
ApplicationUser
ää .
{
ää/ 0
UserName
ää1 9
=
ää: ;
model
ää< A
.
ääA B
Email
ääB G
,
ääG H
Email
ääI N
=
ääO P
model
ääQ V
.
ääV W
Email
ääW \
}
ää] ^
;
ää^ _
var
åå 
alreadyRegistered
åå %
=
åå& '
await
åå( -
_userManager
åå. :
.
åå: ;
FindByEmailAsync
åå; K
(
ååK L
model
ååL Q
.
ååQ R
Email
ååR W
)
ååW X
;
ååX Y
var
çç 
result
çç 
=
çç 
await
çç "
_userManager
çç# /
.
çç/ 0
CreateAsync
çç0 ;
(
çç; <
user
çç< @
)
çç@ A
;
ççA B
if
èè 
(
èè 
result
èè 
.
èè 
	Succeeded
èè $
||
èè% '
alreadyRegistered
èè( 9
.
èè9 :
UserName
èè: B
!=
èèC E
null
èèF J
)
èèJ K
{
ëë 
result
íí 
=
íí 
await
íí "
_userManager
íí# /
.
íí/ 0
AddLoginAsync
íí0 =
(
íí= >
user
íí> B
,
ííB C
info
ííD H
)
ííH I
;
ííI J
if
îî 
(
îî 
result
îî 
.
îî 
	Succeeded
îî (
||
îî) +
alreadyRegistered
îî, =
.
îî= >
UserName
îî> F
!=
îîG I
null
îîJ N
)
îîN O
{
ïï 
await
óó 
_signInManager
óó ,
.
óó, -
SignInAsync
óó- 8
(
óó8 9
user
óó9 =
,
óó= >
isPersistent
óó? K
:
óóK L
false
óóM R
)
óóR S
;
óóS T
RedirectToAction
ôô (
(
ôô( )
$str
ôô) 0
,
ôô0 1
$str
ôô2 <
)
ôô< =
;
ôô= >
}
öö 
}
õõ 
}
úú 
ViewData
ûû 
[
ûû 
$str
ûû  
]
ûû  !
=
ûû" #
	returnUrl
ûû$ -
;
ûû- .
return
üü 
View
üü 
(
üü 
model
üü 
)
üü 
;
üü 
}
†† 	
public
¢¢ 
IActionResult
¢¢ "
ExternalLoginFailure
¢¢ 1
(
¢¢1 2
)
¢¢2 3
{
££ 	
return
§§ 
View
§§ 
(
§§ 
)
§§ 
;
§§ 
}
•• 	
}
¶¶ 
}ßß Ù'
eE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Controllers\ProfileApiControllerController.cs
	namespace 	
ExternalLogins
 
. 
Controllers $
{		 
[

 
Route

 

(


 
$str

 
)

 
]

  
public 

class  
ProfileApiController %
:& '

Controller( 2
{ 
private 
readonly 
ProfileContext '
_context( 0
;0 1
public  
ProfileApiController #
(# $
ProfileContext$ 2
context3 :
): ;
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
CreateIndividual) 9
(9 :

Individual: D
modelE J
)J K
{ 	
try 
{ 
if 
( 

ModelState 
. 
IsValid &
)& '
{ 
_context 
. 
Add  
(  !
model! &
)& '
;' (
await 
_context "
." #
SaveChangesAsync# 3
(3 4
)4 5
;5 6
return 
RedirectToAction +
(+ ,
$str, 3
,3 4
$str5 ?
)? @
;@ A
} 
}   
catch!! 
(!! 
DbException!! 
ex!! !
)!!! "
{"" 

ModelState## 
.## 
AddModelError## (
(##( )
ex##) +
.##+ ,
ToString##, 4
(##4 5
)##5 6
,##6 7
$str##8 z
)##z {
;##{ |
}%% 
return'' 
RedirectToAction'' #
(''# $
$str''$ +
,''+ ,
$str''- 7
,''7 8
model''9 >
)''> ?
;''? @
}** 	
[-- 	
HttpPost--	 
]-- 
public.. 
async.. 
Task.. 
<.. 
IActionResult.. '
>..' (
EditIndividual..) 7
(..7 8
Guid..8 <
id..= ?
,..? @

Individual..A K
model..L Q
)..Q R
{// 	
if00 
(00 
id00 
!=00 
model00 
.00 
IndividualId00 (
)00( )
{11 
return22 
NotFound22 
(22  
)22  !
;22! "
}33 
if55 
(55 

ModelState55 
.55 
IsValid55 "
)55" #
{66 
try77 
{88 
_context99 
.99 
Update99 #
(99# $
model99$ )
)99) *
;99* +
await:: 
_context:: "
.::" #
SaveChangesAsync::# 3
(::3 4
)::4 5
;::5 6
return;; 
RedirectToAction;; +
(;;+ ,
$str;;, 3
,;;3 4
$str;;5 ?
);;? @
;;;@ A
}== 
catch>> 
(>> 
DbUpdateException>> (
ex>>) +
)>>+ ,
{?? 

ModelState@@ 
.@@ 
AddModelError@@ ,
(@@, -
ex@@- /
.@@/ 0
ToString@@0 8
(@@8 9
)@@9 :
,@@: ;
$str@@< ~
)@@~ 
;	@@ Ä
}CC 
}FF 
returnHH 
RedirectToActionHH #
(HH# $
$strHH$ +
,HH+ ,
$strHH- 7
,HH7 8
modelHH9 >
)HH> ?
;HH? @
}II 	
[LL 	
HttpGetLL	 
]LL 
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
DetailIndividualMM) 9
(MM9 :
GuidMM: >
?MM> ?
idMM@ B
)MMB C
{NN 	
ifOO 
(OO 
idOO 
==OO 
nullOO 
)OO 
{PP 
returnRR 
NotFoundRR 
(RR  
)RR  !
;RR! "
}SS 
varUU 
modelUU 
=UU 
awaitUU 
_contextUU &
.UU& '
IndividualsUU' 2
.UU2 3 
SingleOrDefaultAsyncUU3 G
(UUG H
xUUH I
=>UUJ L
xUUM N
.UUN O
IndividualIdUUO [
==UU\ ^
idUU_ a
)UUa b
;UUb c
ifWW 
(WW 
modelWW 
==WW 
nullWW 
)WW 
{XX 
returnZZ 
NotFoundZZ 
(ZZ  
)ZZ  !
;ZZ! "
}[[ 
return]] 
PartialView]] 
(]] 
model]] $
)]]$ %
;]]% &
}__ 	
}`` 
}aa ú”
dE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Migrations\20180615000920_IdentityMigrate.cs
	namespace 	
ExternalLogins
 
. 

Migrations #
{ 
public 

partial 
class 
IdentityMigrate (
:) *
	Migration+ 4
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
nullable. 6
:6 7
false8 =
)= >
,> ?
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
	maxLength0 9
:9 :
$num; >
,> ?
nullable@ H
:H I
trueJ N
)N O
,O P
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
	maxLength: C
:C D
$numE H
,H I
nullableJ R
:R S
trueT X
)X Y
,Y Z
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
nullable< D
:D E
trueF J
)J K
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
AccessFailedCount %
=& '
table( -
.- .
Column. 4
<4 5
int5 8
>8 9
(9 :
nullable: B
:B C
falseD I
)I J
,J K
EmailConfirmed "
=# $
table% *
.* +
Column+ 1
<1 2
bool2 6
>6 7
(7 8
nullable8 @
:@ A
falseB G
)G H
,H I
LockoutEnabled "
=# $
table% *
.* +
Column+ 1
<1 2
bool2 6
>6 7
(7 8
nullable8 @
:@ A
falseB G
)G H
,H I

LockoutEnd   
=    
table  ! &
.  & '
Column  ' -
<  - .
DateTimeOffset  . <
>  < =
(  = >
nullable  > F
:  F G
true  H L
)  L M
,  M N 
PhoneNumberConfirmed!! (
=!!) *
table!!+ 0
.!!0 1
Column!!1 7
<!!7 8
bool!!8 <
>!!< =
(!!= >
nullable!!> F
:!!F G
false!!H M
)!!M N
,!!N O
TwoFactorEnabled"" $
=""% &
table""' ,
."", -
Column""- 3
<""3 4
bool""4 8
>""8 9
(""9 :
nullable"": B
:""B C
false""D I
)""I J
,""J K
Id## 
=## 
table## 
.## 
Column## %
<##% &
string##& ,
>##, -
(##- .
nullable##. 6
:##6 7
false##8 =
)##= >
,##> ?
UserName$$ 
=$$ 
table$$ $
.$$$ %
Column$$% +
<$$+ ,
string$$, 2
>$$2 3
($$3 4
	maxLength$$4 =
:$$= >
$num$$? B
,$$B C
nullable$$D L
:$$L M
true$$N R
)$$R S
,$$S T
NormalizedUserName%% &
=%%' (
table%%) .
.%%. /
Column%%/ 5
<%%5 6
string%%6 <
>%%< =
(%%= >
	maxLength%%> G
:%%G H
$num%%I L
,%%L M
nullable%%N V
:%%V W
true%%X \
)%%\ ]
,%%] ^
Email&& 
=&& 
table&& !
.&&! "
Column&&" (
<&&( )
string&&) /
>&&/ 0
(&&0 1
	maxLength&&1 :
:&&: ;
$num&&< ?
,&&? @
nullable&&A I
:&&I J
true&&K O
)&&O P
,&&P Q
NormalizedEmail'' #
=''$ %
table''& +
.''+ ,
Column'', 2
<''2 3
string''3 9
>''9 :
('': ;
	maxLength''; D
:''D E
$num''F I
,''I J
nullable''K S
:''S T
true''U Y
)''Y Z
,''Z [
PasswordHash((  
=((! "
table((# (
.((( )
Column(() /
<((/ 0
string((0 6
>((6 7
(((7 8
nullable((8 @
:((@ A
true((B F
)((F G
,((G H
SecurityStamp)) !
=))" #
table))$ )
.))) *
Column))* 0
<))0 1
string))1 7
>))7 8
())8 9
nullable))9 A
:))A B
true))C G
)))G H
,))H I
ConcurrencyStamp** $
=**% &
table**' ,
.**, -
Column**- 3
<**3 4
string**4 :
>**: ;
(**; <
nullable**< D
:**D E
true**F J
)**J K
,**K L
PhoneNumber++ 
=++  !
table++" '
.++' (
Column++( .
<++. /
string++/ 5
>++5 6
(++6 7
nullable++7 ?
:++? @
true++A E
)++E F
},, 
,,, 
constraints-- 
:-- 
table-- "
=>--# %
{.. 
table// 
.// 

PrimaryKey// $
(//$ %
$str//% 5
,//5 6
x//7 8
=>//9 ;
x//< =
.//= >
Id//> @
)//@ A
;//A B
}00 
)00 
;00 
migrationBuilder22 
.22 
CreateTable22 (
(22( )
name33 
:33 
$str33 (
,33( )
columns44 
:44 
table44 
=>44 !
new44" %
{55 
Id66 
=66 
table66 
.66 
Column66 %
<66% &
int66& )
>66) *
(66* +
nullable66+ 3
:663 4
false665 :
)66: ;
.77 

Annotation77 #
(77# $
$str77$ G
,77G H,
 SqlServerValueGenerationStrategy77I i
.77i j
IdentityColumn77j x
)77x y
,77y z
RoleId88 
=88 
table88 "
.88" #
Column88# )
<88) *
string88* 0
>880 1
(881 2
nullable882 :
:88: ;
false88< A
)88A B
,88B C
	ClaimType99 
=99 
table99  %
.99% &
Column99& ,
<99, -
string99- 3
>993 4
(994 5
nullable995 =
:99= >
true99? C
)99C D
,99D E

ClaimValue:: 
=::  
table::! &
.::& '
Column::' -
<::- .
string::. 4
>::4 5
(::5 6
nullable::6 >
:::> ?
true::@ D
)::D E
};; 
,;; 
constraints<< 
:<< 
table<< "
=><<# %
{== 
table>> 
.>> 

PrimaryKey>> $
(>>$ %
$str>>% :
,>>: ;
x>>< =
=>>>> @
x>>A B
.>>B C
Id>>C E
)>>E F
;>>F G
table?? 
.?? 

ForeignKey?? $
(??$ %
name@@ 
:@@ 
$str@@ F
,@@F G
columnAA 
:AA 
xAA  !
=>AA" $
xAA% &
.AA& '
RoleIdAA' -
,AA- .
principalTableBB &
:BB& '
$strBB( 5
,BB5 6
principalColumnCC '
:CC' (
$strCC) -
,CC- .
onDeleteDD  
:DD  !
ReferentialActionDD" 3
.DD3 4
CascadeDD4 ;
)DD; <
;DD< =
}EE 
)EE 
;EE 
migrationBuilderGG 
.GG 
CreateTableGG (
(GG( )
nameHH 
:HH 
$strHH (
,HH( )
columnsII 
:II 
tableII 
=>II !
newII" %
{JJ 
IdKK 
=KK 
tableKK 
.KK 
ColumnKK %
<KK% &
intKK& )
>KK) *
(KK* +
nullableKK+ 3
:KK3 4
falseKK5 :
)KK: ;
.LL 

AnnotationLL #
(LL# $
$strLL$ G
,LLG H,
 SqlServerValueGenerationStrategyLLI i
.LLi j
IdentityColumnLLj x
)LLx y
,LLy z
UserIdMM 
=MM 
tableMM "
.MM" #
ColumnMM# )
<MM) *
stringMM* 0
>MM0 1
(MM1 2
nullableMM2 :
:MM: ;
falseMM< A
)MMA B
,MMB C
	ClaimTypeNN 
=NN 
tableNN  %
.NN% &
ColumnNN& ,
<NN, -
stringNN- 3
>NN3 4
(NN4 5
nullableNN5 =
:NN= >
trueNN? C
)NNC D
,NND E

ClaimValueOO 
=OO  
tableOO! &
.OO& '
ColumnOO' -
<OO- .
stringOO. 4
>OO4 5
(OO5 6
nullableOO6 >
:OO> ?
trueOO@ D
)OOD E
}PP 
,PP 
constraintsQQ 
:QQ 
tableQQ "
=>QQ# %
{RR 
tableSS 
.SS 

PrimaryKeySS $
(SS$ %
$strSS% :
,SS: ;
xSS< =
=>SS> @
xSSA B
.SSB C
IdSSC E
)SSE F
;SSF G
tableTT 
.TT 

ForeignKeyTT $
(TT$ %
nameUU 
:UU 
$strUU F
,UUF G
columnVV 
:VV 
xVV  !
=>VV" $
xVV% &
.VV& '
UserIdVV' -
,VV- .
principalTableWW &
:WW& '
$strWW( 5
,WW5 6
principalColumnXX '
:XX' (
$strXX) -
,XX- .
onDeleteYY  
:YY  !
ReferentialActionYY" 3
.YY3 4
CascadeYY4 ;
)YY; <
;YY< =
}ZZ 
)ZZ 
;ZZ 
migrationBuilder\\ 
.\\ 
CreateTable\\ (
(\\( )
name]] 
:]] 
$str]] (
,]]( )
columns^^ 
:^^ 
table^^ 
=>^^ !
new^^" %
{__ 
LoginProvider`` !
=``" #
table``$ )
.``) *
Column``* 0
<``0 1
string``1 7
>``7 8
(``8 9
nullable``9 A
:``A B
false``C H
)``H I
,``I J
ProviderKeyaa 
=aa  !
tableaa" '
.aa' (
Columnaa( .
<aa. /
stringaa/ 5
>aa5 6
(aa6 7
nullableaa7 ?
:aa? @
falseaaA F
)aaF G
,aaG H
ProviderDisplayNamebb '
=bb( )
tablebb* /
.bb/ 0
Columnbb0 6
<bb6 7
stringbb7 =
>bb= >
(bb> ?
nullablebb? G
:bbG H
truebbI M
)bbM N
,bbN O
UserIdcc 
=cc 
tablecc "
.cc" #
Columncc# )
<cc) *
stringcc* 0
>cc0 1
(cc1 2
nullablecc2 :
:cc: ;
falsecc< A
)ccA B
}dd 
,dd 
constraintsee 
:ee 
tableee "
=>ee# %
{ff 
tablegg 
.gg 

PrimaryKeygg $
(gg$ %
$strgg% :
,gg: ;
xgg< =
=>gg> @
newggA D
{ggE F
xggG H
.ggH I
LoginProviderggI V
,ggV W
xggX Y
.ggY Z
ProviderKeyggZ e
}ggf g
)ggg h
;ggh i
tablehh 
.hh 

ForeignKeyhh $
(hh$ %
nameii 
:ii 
$strii F
,iiF G
columnjj 
:jj 
xjj  !
=>jj" $
xjj% &
.jj& '
UserIdjj' -
,jj- .
principalTablekk &
:kk& '
$strkk( 5
,kk5 6
principalColumnll '
:ll' (
$strll) -
,ll- .
onDeletemm  
:mm  !
ReferentialActionmm" 3
.mm3 4
Cascademm4 ;
)mm; <
;mm< =
}nn 
)nn 
;nn 
migrationBuilderpp 
.pp 
CreateTablepp (
(pp( )
nameqq 
:qq 
$strqq '
,qq' (
columnsrr 
:rr 
tablerr 
=>rr !
newrr" %
{ss 
UserIdtt 
=tt 
tablett "
.tt" #
Columntt# )
<tt) *
stringtt* 0
>tt0 1
(tt1 2
nullablett2 :
:tt: ;
falsett< A
)ttA B
,ttB C
RoleIduu 
=uu 
tableuu "
.uu" #
Columnuu# )
<uu) *
stringuu* 0
>uu0 1
(uu1 2
nullableuu2 :
:uu: ;
falseuu< A
)uuA B
}vv 
,vv 
constraintsww 
:ww 
tableww "
=>ww# %
{xx 
tableyy 
.yy 

PrimaryKeyyy $
(yy$ %
$stryy% 9
,yy9 :
xyy; <
=>yy= ?
newyy@ C
{yyD E
xyyF G
.yyG H
UserIdyyH N
,yyN O
xyyP Q
.yyQ R
RoleIdyyR X
}yyY Z
)yyZ [
;yy[ \
tablezz 
.zz 

ForeignKeyzz $
(zz$ %
name{{ 
:{{ 
$str{{ E
,{{E F
column|| 
:|| 
x||  !
=>||" $
x||% &
.||& '
RoleId||' -
,||- .
principalTable}} &
:}}& '
$str}}( 5
,}}5 6
principalColumn~~ '
:~~' (
$str~~) -
,~~- .
onDelete  
:  !
ReferentialAction" 3
.3 4
Cascade4 ;
); <
;< =
table
ÄÄ 
.
ÄÄ 

ForeignKey
ÄÄ $
(
ÄÄ$ %
name
ÅÅ 
:
ÅÅ 
$str
ÅÅ E
,
ÅÅE F
column
ÇÇ 
:
ÇÇ 
x
ÇÇ  !
=>
ÇÇ" $
x
ÇÇ% &
.
ÇÇ& '
UserId
ÇÇ' -
,
ÇÇ- .
principalTable
ÉÉ &
:
ÉÉ& '
$str
ÉÉ( 5
,
ÉÉ5 6
principalColumn
ÑÑ '
:
ÑÑ' (
$str
ÑÑ) -
,
ÑÑ- .
onDelete
ÖÖ  
:
ÖÖ  !
ReferentialAction
ÖÖ" 3
.
ÖÖ3 4
Cascade
ÖÖ4 ;
)
ÖÖ; <
;
ÖÖ< =
}
ÜÜ 
)
ÜÜ 
;
ÜÜ 
migrationBuilder
àà 
.
àà 
CreateTable
àà (
(
àà( )
name
ââ 
:
ââ 
$str
ââ (
,
ââ( )
columns
ää 
:
ää 
table
ää 
=>
ää !
new
ää" %
{
ãã 
UserId
åå 
=
åå 
table
åå "
.
åå" #
Column
åå# )
<
åå) *
string
åå* 0
>
åå0 1
(
åå1 2
nullable
åå2 :
:
åå: ;
false
åå< A
)
ååA B
,
ååB C
LoginProvider
çç !
=
çç" #
table
çç$ )
.
çç) *
Column
çç* 0
<
çç0 1
string
çç1 7
>
çç7 8
(
çç8 9
nullable
çç9 A
:
ççA B
false
ççC H
)
ççH I
,
ççI J
Name
éé 
=
éé 
table
éé  
.
éé  !
Column
éé! '
<
éé' (
string
éé( .
>
éé. /
(
éé/ 0
nullable
éé0 8
:
éé8 9
false
éé: ?
)
éé? @
,
éé@ A
Value
èè 
=
èè 
table
èè !
.
èè! "
Column
èè" (
<
èè( )
string
èè) /
>
èè/ 0
(
èè0 1
nullable
èè1 9
:
èè9 :
true
èè; ?
)
èè? @
}
êê 
,
êê 
constraints
ëë 
:
ëë 
table
ëë "
=>
ëë# %
{
íí 
table
ìì 
.
ìì 

PrimaryKey
ìì $
(
ìì$ %
$str
ìì% :
,
ìì: ;
x
ìì< =
=>
ìì> @
new
ììA D
{
ììE F
x
ììG H
.
ììH I
UserId
ììI O
,
ììO P
x
ììQ R
.
ììR S
LoginProvider
ììS `
,
ìì` a
x
ììb c
.
ììc d
Name
ììd h
}
ììi j
)
ììj k
;
ììk l
table
îî 
.
îî 

ForeignKey
îî $
(
îî$ %
name
ïï 
:
ïï 
$str
ïï F
,
ïïF G
column
ññ 
:
ññ 
x
ññ  !
=>
ññ" $
x
ññ% &
.
ññ& '
UserId
ññ' -
,
ññ- .
principalTable
óó &
:
óó& '
$str
óó( 5
,
óó5 6
principalColumn
òò '
:
òò' (
$str
òò) -
,
òò- .
onDelete
ôô  
:
ôô  !
ReferentialAction
ôô" 3
.
ôô3 4
Cascade
ôô4 ;
)
ôô; <
;
ôô< =
}
öö 
)
öö 
;
öö 
migrationBuilder
úú 
.
úú 
CreateTable
úú (
(
úú( )
name
ùù 
:
ùù 
$str
ùù "
,
ùù" #
columns
ûû 
:
ûû 
table
ûû 
=>
ûû !
new
ûû" %
{
üü 
IndividualId
††  
=
††! "
table
††# (
.
††( )
Column
††) /
<
††/ 0
Guid
††0 4
>
††4 5
(
††5 6
nullable
††6 >
:
††> ?
false
††@ E
)
††E F
,
††F G
FullName
°° 
=
°° 
table
°° $
.
°°$ %
Column
°°% +
<
°°+ ,
string
°°, 2
>
°°2 3
(
°°3 4
	maxLength
°°4 =
:
°°= >
$num
°°? A
,
°°A B
nullable
°°C K
:
°°K L
false
°°M R
)
°°R S
,
°°S T
DateOfBirth
¢¢ 
=
¢¢  !
table
¢¢" '
.
¢¢' (
Column
¢¢( .
<
¢¢. /
DateTime
¢¢/ 7
>
¢¢7 8
(
¢¢8 9
nullable
¢¢9 A
:
¢¢A B
false
¢¢C H
)
¢¢H I
,
¢¢I J
Address
££ 
=
££ 
table
££ #
.
££# $
Column
££$ *
<
££* +
string
££+ 1
>
££1 2
(
££2 3
nullable
££3 ;
:
££; <
true
££= A
)
££A B
,
££B C
State
§§ 
=
§§ 
table
§§ !
.
§§! "
Column
§§" (
<
§§( )
string
§§) /
>
§§/ 0
(
§§0 1
nullable
§§1 9
:
§§9 :
true
§§; ?
)
§§? @
,
§§@ A
City
•• 
=
•• 
table
••  
.
••  !
Column
••! '
<
••' (
string
••( .
>
••. /
(
••/ 0
nullable
••0 8
:
••8 9
true
••: >
)
••> ?
,
••? @
ZipCode
¶¶ 
=
¶¶ 
table
¶¶ #
.
¶¶# $
Column
¶¶$ *
<
¶¶* +
string
¶¶+ 1
>
¶¶1 2
(
¶¶2 3
nullable
¶¶3 ;
:
¶¶; <
true
¶¶= A
)
¶¶A B
,
¶¶B C
AspNetUserId
ßß  
=
ßß! "
table
ßß# (
.
ßß( )
Column
ßß) /
<
ßß/ 0
string
ßß0 6
>
ßß6 7
(
ßß7 8
nullable
ßß8 @
:
ßß@ A
true
ßßB F
)
ßßF G
}
®® 
,
®® 
constraints
©© 
:
©© 
table
©© "
=>
©©# %
{
™™ 
table
´´ 
.
´´ 

PrimaryKey
´´ $
(
´´$ %
$str
´´% 4
,
´´4 5
x
´´6 7
=>
´´8 :
x
´´; <
.
´´< =
IndividualId
´´= I
)
´´I J
;
´´J K
table
¨¨ 
.
¨¨ 

ForeignKey
¨¨ $
(
¨¨$ %
name
≠≠ 
:
≠≠ 
$str
≠≠ F
,
≠≠F G
column
ÆÆ 
:
ÆÆ 
x
ÆÆ  !
=>
ÆÆ" $
x
ÆÆ% &
.
ÆÆ& '
AspNetUserId
ÆÆ' 3
,
ÆÆ3 4
principalTable
ØØ &
:
ØØ& '
$str
ØØ( 5
,
ØØ5 6
principalColumn
∞∞ '
:
∞∞' (
$str
∞∞) -
,
∞∞- .
onDelete
±±  
:
±±  !
ReferentialAction
±±" 3
.
±±3 4
Restrict
±±4 <
)
±±< =
;
±±= >
}
≤≤ 
)
≤≤ 
;
≤≤ 
migrationBuilder
¥¥ 
.
¥¥ 
CreateIndex
¥¥ (
(
¥¥( )
name
µµ 
:
µµ 
$str
µµ 2
,
µµ2 3
table
∂∂ 
:
∂∂ 
$str
∂∂ )
,
∂∂) *
column
∑∑ 
:
∑∑ 
$str
∑∑  
)
∑∑  !
;
∑∑! "
migrationBuilder
ππ 
.
ππ 
CreateIndex
ππ (
(
ππ( )
name
∫∫ 
:
∫∫ 
$str
∫∫ %
,
∫∫% &
table
ªª 
:
ªª 
$str
ªª $
,
ªª$ %
column
ºº 
:
ºº 
$str
ºº (
,
ºº( )
unique
ΩΩ 
:
ΩΩ 
true
ΩΩ 
,
ΩΩ 
filter
ææ 
:
ææ 
$str
ææ 6
)
ææ6 7
;
ææ7 8
migrationBuilder
¿¿ 
.
¿¿ 
CreateIndex
¿¿ (
(
¿¿( )
name
¡¡ 
:
¡¡ 
$str
¡¡ 2
,
¡¡2 3
table
¬¬ 
:
¬¬ 
$str
¬¬ )
,
¬¬) *
column
√√ 
:
√√ 
$str
√√  
)
√√  !
;
√√! "
migrationBuilder
≈≈ 
.
≈≈ 
CreateIndex
≈≈ (
(
≈≈( )
name
∆∆ 
:
∆∆ 
$str
∆∆ 2
,
∆∆2 3
table
«« 
:
«« 
$str
«« )
,
««) *
column
»» 
:
»» 
$str
»»  
)
»»  !
;
»»! "
migrationBuilder
   
.
   
CreateIndex
   (
(
  ( )
name
ÀÀ 
:
ÀÀ 
$str
ÀÀ 1
,
ÀÀ1 2
table
ÃÃ 
:
ÃÃ 
$str
ÃÃ (
,
ÃÃ( )
column
ÕÕ 
:
ÕÕ 
$str
ÕÕ  
)
ÕÕ  !
;
ÕÕ! "
migrationBuilder
œœ 
.
œœ 
CreateIndex
œœ (
(
œœ( )
name
–– 
:
–– 
$str
–– "
,
––" #
table
—— 
:
—— 
$str
—— $
,
——$ %
column
““ 
:
““ 
$str
““ )
)
““) *
;
““* +
migrationBuilder
‘‘ 
.
‘‘ 
CreateIndex
‘‘ (
(
‘‘( )
name
’’ 
:
’’ 
$str
’’ %
,
’’% &
table
÷÷ 
:
÷÷ 
$str
÷÷ $
,
÷÷$ %
column
◊◊ 
:
◊◊ 
$str
◊◊ ,
,
◊◊, -
unique
ÿÿ 
:
ÿÿ 
true
ÿÿ 
,
ÿÿ 
filter
ŸŸ 
:
ŸŸ 
$str
ŸŸ :
)
ŸŸ: ;
;
ŸŸ; <
migrationBuilder
€€ 
.
€€ 
CreateIndex
€€ (
(
€€( )
name
‹‹ 
:
‹‹ 
$str
‹‹ 2
,
‹‹2 3
table
›› 
:
›› 
$str
›› #
,
››# $
column
ﬁﬁ 
:
ﬁﬁ 
$str
ﬁﬁ &
)
ﬁﬁ& '
;
ﬁﬁ' (
}
ﬂﬂ 	
	protected
·· 
override
·· 
void
·· 
Down
··  $
(
··$ %
MigrationBuilder
··% 5
migrationBuilder
··6 F
)
··F G
{
‚‚ 	
migrationBuilder
„„ 
.
„„ 
	DropTable
„„ &
(
„„& '
name
‰‰ 
:
‰‰ 
$str
‰‰ (
)
‰‰( )
;
‰‰) *
migrationBuilder
ÊÊ 
.
ÊÊ 
	DropTable
ÊÊ &
(
ÊÊ& '
name
ÁÁ 
:
ÁÁ 
$str
ÁÁ (
)
ÁÁ( )
;
ÁÁ) *
migrationBuilder
ÈÈ 
.
ÈÈ 
	DropTable
ÈÈ &
(
ÈÈ& '
name
ÍÍ 
:
ÍÍ 
$str
ÍÍ (
)
ÍÍ( )
;
ÍÍ) *
migrationBuilder
ÏÏ 
.
ÏÏ 
	DropTable
ÏÏ &
(
ÏÏ& '
name
ÌÌ 
:
ÌÌ 
$str
ÌÌ '
)
ÌÌ' (
;
ÌÌ( )
migrationBuilder
ÔÔ 
.
ÔÔ 
	DropTable
ÔÔ &
(
ÔÔ& '
name
 
:
 
$str
 (
)
( )
;
) *
migrationBuilder
ÚÚ 
.
ÚÚ 
	DropTable
ÚÚ &
(
ÚÚ& '
name
ÛÛ 
:
ÛÛ 
$str
ÛÛ "
)
ÛÛ" #
;
ÛÛ# $
migrationBuilder
ıı 
.
ıı 
	DropTable
ıı &
(
ıı& '
name
ˆˆ 
:
ˆˆ 
$str
ˆˆ #
)
ˆˆ# $
;
ˆˆ$ %
migrationBuilder
¯¯ 
.
¯¯ 
	DropTable
¯¯ &
(
¯¯& '
name
˘˘ 
:
˘˘ 
$str
˘˘ #
)
˘˘# $
;
˘˘$ %
}
˙˙ 	
}
˚˚ 
}¸¸ Ã
QE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Models\ApplicationUser.cs
	namespace 	
ExternalLogins
 
. 
Models 
{ 
public 

class 
ApplicationUser  
:! "
IdentityUser# /
{ 
} 
}		 Ì
LE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Models\Individual.cs
	namespace 	
ExternalLogins
 
. 
Models 
{ 
public 

class 

Individual 
{ 
[		 	
DatabaseGenerated			 
(		 #
DatabaseGeneratedOption		 2
.		2 3
Identity		3 ;
)		; <
]		< =
[

 	
Required

	 
]

 
public 
Guid 
IndividualId  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
Required	 
] 
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
DataType	 
( 
DataType 
. 
DateTime #
)# $
]$ %
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public 
DateTime 
DateOfBirth #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
State 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
ZipCode 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
ApplicationUser 
User #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
AspNetUserId "
{# $
get% (
;( )
set* -
;- .
}/ 0
}   
}!! ¡
PE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Models\ProfileContext.cs
	namespace 	
ExternalLogins
 
. 
Models 
{ 
public 

class 
ProfileContext 
:  !
IdentityDbContext" 3
<3 4
ApplicationUser4 C
>C D
{ 
public		 
ProfileContext		 
(		 
DbContextOptions		 .
<		. /
ProfileContext		/ =
>		= >
options		? F
)		F G
:		H I
base		J N
(		N O
options		O V
)		V W
{

 	
} 	
public 
DbSet 
< 

Individual 
>  
Individuals! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
builder= D
)D E
{ 	
base 
. 
OnModelCreating  
(  !
builder! (
)( )
;) *
builder 
. 
Entity 
< 

Individual %
>% &
(& '
)' (
.( )
ToTable) 0
(0 1
$str1 =
)= >
;> ?
} 	
} 
} Í
BE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Program.cs
	namespace 	
ExternalLogins
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	 
CreateWebHostBuilder

  
(

  !
args

! %
)

% &
.

& '
Build

' ,
(

, -
)

- .
.

. /
Run

/ 2
(

2 3
)

3 4
;

4 5
} 	
public 
static 
IWebHostBuilder % 
CreateWebHostBuilder& :
(: ;
string; A
[A B
]B C
argsD H
)H I
=>J L
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
;& '
} 
} ı
XE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Repository\IProfileRepository.cs
	namespace 	
ExternalLogins
 
. 

Repository #
{ 
public 

	interface 
IProfileRepository '
{ 
List 
< 

Individual 
> 
GetIndividualList *
(* +
string+ 1
id2 4
)4 5
;5 6
void		 
CreateIndividual		 
(		 

Individual		 (
model		) .
)		. /
;		/ 0
}

 
} û
WE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Repository\ProfileRepository.cs
	namespace 	
ExternalLogins
 
. 

Repository #
{ 
public 

class 
ProfileRepository "
:# $
IProfileRepository% 7
{ 
private		 
readonly		 
ProfileContext		 '
_context		( 0
;		0 1
public

 
ProfileRepository

  
(

  !
ProfileContext

! /
context

0 7
)

7 8
{ 	
_context 
= 
context 
; 
} 	
public 
List 
< 

Individual 
> 
GetIndividualList  1
(1 2
string2 8
id9 ;
); <
{ 	
return 
_context 
. 
Individuals '
.' (
Where( -
(- .
x. /
=>0 2
x3 4
.4 5
AspNetUserId5 A
==B D
idE G
)G H
.H I
ToListI O
(O P
)P Q
;Q R
} 	
public 
async 
void 
CreateIndividual *
(* +

Individual+ 5
model6 ;
); <
{ 	
_context 
. 
Add 
( 
model 
) 
;  
await 
_context 
. 
SaveChangesAsync +
(+ ,
), -
;- .
} 	
} 
} Â*
BE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\Startup.cs
	namespace 	
ExternalLogins
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IHostingEnvironment *
env+ .
). /
{ 	
DotEnv 
. 
Config 
( 
) 
; 
var 
builder 
= 
new  
ConfigurationBuilder 2
(2 3
)3 4
. 
SetBasePath 
( 
env  
.  !
ContentRootPath! 0
)0 1
. 
AddJsonFile 
( 
$str /
,/ 0
optional1 9
:9 :
true; ?
,? @
reloadOnChangeA O
:O P
trueQ U
)U V
. 
AddJsonFile 
( 
$" 
appsettings. +
{+ ,
env, /
./ 0
EnvironmentName0 ?
}? @
.json@ E
"E F
,F G
optionalH P
:P Q
trueR V
)V W
. #
AddEnvironmentVariables (
(( )
)) *
;* +
Configuration 
= 
builder #
.# $
Build$ )
() *
)* +
;+ ,
} 	
public 
IConfigurationRoot !
Configuration" /
{0 1
get2 5
;5 6
}7 8
public!! 
void!! 
ConfigureServices!! %
(!!% &
IServiceCollection!!& 8
services!!9 A
)!!A B
{"" 	
services$$ 
.$$ 
AddDbContext$$ !
<$$! "
ProfileContext$$" 0
>$$0 1
($$1 2
options%% 
=>%% 
options%% "
.%%" #
UseSqlServer%%# /
(%%/ 0
Environment%%0 ;
.%%; <"
GetEnvironmentVariable%%< R
(%%R S
$str%%S n
)%%n o
)%%o p
)%%p q
;%%q r
services'' 
.'' 
AddIdentity''  
<''  !
ApplicationUser''! 0
,''0 1
IdentityRole''2 >
>''> ?
(''? @
)''@ A
.(( $
AddEntityFrameworkStores(( )
<(() *
ProfileContext((* 8
>((8 9
(((9 :
)((: ;
.)) $
AddDefaultTokenProviders)) )
())) *
)))* +
;))+ ,
services++ 
.++ 
AddAuthentication++ &
(++& '
)++' (
.++( )
AddFacebook++) 4
(++4 5
facebookOptions++5 D
=>++E G
{,, 
facebookOptions-- 
.--  
AppId--  %
=--& '
Environment--( 3
.--3 4"
GetEnvironmentVariable--4 J
(--J K
$str--K \
)--\ ]
;--] ^
facebookOptions.. 
...  
	AppSecret..  )
=..* +
Environment.., 7
...7 8"
GetEnvironmentVariable..8 N
(..N O
$str..O d
)..d e
;..e f
}// 
)// 
;// 
services11 
.11 
AddMvc11 
(11 
)11 
;11 
services22 
.22 
	AddScoped22 
<22 
IProfileRepository22 1
,221 2
ProfileRepository223 D
>22D E
(22E F
)22F G
;22G H
}33 	
public66 
void66 
	Configure66 
(66 
IApplicationBuilder66 1
app662 5
,665 6
IHostingEnvironment667 J
env66K N
,66N O
ILoggerFactory66P ^
loggerFactory66_ l
,66l m
ProfileContext66n |
context	66} Ñ
)
66Ñ Ö
{77 	
loggerFactory88 
.88 

AddConsole88 $
(88$ %
Configuration88% 2
.882 3

GetSection883 =
(88= >
$str88> G
)88G H
)88H I
;88I J
loggerFactory99 
.99 
AddDebug99 "
(99" #
)99# $
;99$ %
if;; 
(;; 
env;; 
.;; 
IsDevelopment;; !
(;;! "
);;" #
);;# $
{<< 
app== 
.== %
UseDeveloperExceptionPage== -
(==- .
)==. /
;==/ 0
}>> 
else?? 
{@@ 
appAA 
.AA 
UseExceptionHandlerAA '
(AA' (
$strAA( 7
)AA7 8
;AA8 9
}BB 
appDD 
.DD 
UseStaticFilesDD 
(DD 
)DD  
;DD  !
appFF 
.FF 
UseAuthenticationFF !
(FF! "
)FF" #
;FF# $
appHH 
.HH 
UseMvcHH 
(HH 
routesHH 
=>HH  
{II 
routesJJ 
.JJ 
MapRouteJJ 
(JJ  
nameKK 
:KK 
$strKK #
,KK# $
templateLL 
:LL 
$strLL F
)LLF G
;LLG H
}MM 
)MM 
;MM 
}OO 	
}PP 
}QQ È
\E:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\ViewComponents\LoginViewComponent.cs
	namespace 	
ExternalLogins
 
. 
ViewComponents '
{ 
[ 
ViewComponent 
( 
Name 
= 
$str !
)! "
]" #
public 

class 
LoginViewComponent #
:$ %
ViewComponent& 3
{		 
public

 #
ViewViewComponentResult

 &
Invoke

' -
(

- .
)

. /
{ 	
var 
model 
= 
new 
LoginViewModel *
(* +
)+ ,
;, -
return 
View 
( 
model 
) 
; 
} 	
} 
} Ñ
XE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\ViewModels\DashboardViewModel.cs
	namespace 	
ExternalLogins
 
. 

ViewModels #
{ 
public 

class 
DashboardViewModel #
{ 
public 
List 
< 

Individual 
> 
Individuals  +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
}

 
} ÷
hE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\ViewModels\ExternalLoginConfirmationViewModel.cs
	namespace 	
ExternalLogins
 
. 

ViewModels #
{ 
public 

class .
"ExternalLoginConfirmationViewModel 3
{ 
[ 	
Required	 
] 
[ 	
EmailAddress	 
] 
public		 
string		 
Email		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
} 
} á

TE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\ViewModels\LoginViewModel.cs
	namespace 	
ExternalLogins
 
. 

ViewModels #
{ 
public 

class 
LoginViewModel 
{ 
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
EmailAddress '
)' (
]( )
public		 
string		 
Username		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Display	 
( 
Name 
= 
$str &
)& '
]' (
public 
bool 

RememberMe 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ˛
WE:\meus_arquivos\projetos\ExternalLogins\ExternalLogins\ViewModels\RegisterViewModel.cs
	namespace 	
ExternalLogins
 
. 

ViewModels #
{ 
public 

class 
RegisterViewModel "
{ 
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
EmailAddress '
)' (
]( )
public		 
string		 
Username		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
[ 	
Compare	 
( 
$str 
, 
ErrorMessage )
=* +
$str, E
)E F
]F G
public 
string 
ConfirmPassword %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} 